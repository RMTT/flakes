#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/lib.sh"

read -r ns release <<<"$(get_ns_release "$(pwd)")"

echo "Namespace: $ns"
echo "Release:   $release"
echo ""

if helm list -n "$ns" 2>/dev/null | grep -q "^$release"; then
	log_info "Release status:"
	helm status "$release" -n "$ns"
else
	log_warn "Release '$release' not found in namespace '$ns'"
	exit 1
fi
